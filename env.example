# Cost Katana Backend Environment Variables

# ===================================
# Core Application Settings
# ===================================
NODE_ENV=development
PORT=8000

# ===================================
# Database Configuration
# ===================================
MONGODB_URI=mongodb://localhost:27017/cost-katana

# ===================================
# Authentication & Security
# ===================================
JWT_SECRET=your-super-secret-jwt-key-change-this
JWT_EXPIRES_IN=7d
JWT_REFRESH_SECRET=your-refresh-secret-key-change-this
JWT_REFRESH_EXPIRES_IN=30d
ENCRYPTION_KEY=your-encryption-key-change-this

# ===================================
# AWS Configuration
# ===================================
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_REGION=us-east-1
AWS_BEDROCK_REGION=us-east-1

# AWS Bedrock Settings
AWS_BEDROCK_MODEL_ID=anthropic.claude-3-haiku-20240307-v1:0
AWS_BEDROCK_MAX_TOKENS=4096
AWS_BEDROCK_TEMPERATURE=0.7

# AWS Bedrock Template-Specific Settings
AWS_BEDROCK_TEMPLATE_MODEL_ID=amazon.nova-micro-v1:0

# AWS S3 Settings
AWS_S3_BUCKET=cost-katana-uploads
AWS_S3_REGION=us-east-1

# ===================================
# Logging Configuration
# ===================================
# Enable/disable request logging middleware
ENABLE_REQUEST_LOGGING=true

# Log level: OFF, ERROR, WARN, INFO, DEBUG, VERBOSE
LOG_LEVEL=INFO

# ===================================
# Sentry Error Tracking & Performance Monitoring
# ===================================
# Sentry DSN for error tracking (optional)
SENTRY_DSN=your-sentry-dsn-here

# Sentry environment (development, staging, production)
SENTRY_ENVIRONMENT=development

# Sentry release version (auto-populated from package.json)
SENTRY_RELEASE=

# Error sampling rate (0.0 to 1.0, 1.0 = 100% of errors)
SENTRY_SAMPLE_RATE=1.0

# Performance tracing sample rate (0.0 to 1.0, lower for production)
SENTRY_TRACES_SAMPLE_RATE=0.1

# Profiling sample rate (0.0 to 1.0, lower for production)
SENTRY_PROFILES_SAMPLE_RATE=0.1

# Enable Sentry debug mode (logs Sentry internal operations)
SENTRY_DEBUG=false

# Server name for identifying instances
SENTRY_SERVER_NAME=cost-katana-backend

# Enable/disable performance monitoring
SENTRY_ENABLE_PERFORMANCE_MONITORING=true

# Enable/disable profiling
SENTRY_ENABLE_PROFILING=true

# Enable/disable error filtering
SENTRY_ENABLE_ERROR_FILTERING=true

# ===================================
# OpenTelemetry Configuration
# ===================================
# Service identification
OTEL_SERVICE_NAME=cost-katana-api

# OTLP Endpoints - Mode A: Direct to vendor
# Set to empty to disable OTLP export (recommended for development)
OTLP_HTTP_TRACES_URL=
OTLP_HTTP_METRICS_URL=

# Alternative: Use localhost collector if you have one running
# OTLP_HTTP_TRACES_URL=http://localhost:4318/v1/traces
# OTLP_HTTP_METRICS_URL=http://localhost:4318/v1/metrics

# Authentication headers for vendor (e.g., {"Authorization":"Bearer YOUR_TOKEN"})
# Must be valid JSON format
OTEL_EXPORTER_OTLP_HEADERS=

# TLS Certificate (optional, base64 encoded certificate content for secure connections)
OTEL_EXPORTER_OTLP_CERTIFICATE=

# Security settings for OTLP exporter
OTEL_EXPORTER_OTLP_INSECURE=true

# Privacy Settings
CK_CAPTURE_MODEL_TEXT=false

# Regional telemetry routing (auto, us, eu, ap)
CK_TELEMETRY_REGION=auto

# Optional: Enable/disable telemetry completely
TELEMETRY_ENABLED=true

# Optional: Collector watchdog for auto-restart (production)
ENABLE_COLLECTOR_WATCHDOG=false
COLLECTOR_WATCHDOG_INTERVAL=60000

# ===================================
# Telemetry Cleanup & Optimization
# ===================================
# Auto-delete telemetry data older than X days
TELEMETRY_TTL_DAYS=7

# Retention policies (in days)
TELEMETRY_ERROR_RETENTION_DAYS=30              # Keep errors longer
TELEMETRY_SUCCESS_RETENTION_DAYS=7             # Keep successful requests
TELEMETRY_VECTOR_RETENTION_DAYS=3              # Keep vector embeddings

# Sampling rate for successful requests (0.0 to 1.0)
# 0.1 = 10% of successful requests are stored, 0.5 = 50%, 1.0 = 100%
TELEMETRY_SAMPLE_RATE=0.1

# Enable/disable vector embeddings (consumes significant space)
ENABLE_TELEMETRY_VECTORIZATION=false

# ===================================
# Email Configuration
# ===================================
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=your-email@gmail.com
EMAIL_PASS=your-app-specific-password
EMAIL_FROM=Cost Katana <noreply@costkatana.com>

# ===================================
# Redis Configuration
# ===================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ===================================
# External Services
# ===================================
# OpenAI
OPENAI_API_KEY=your-openai-api-key
OPENAI_ORG_ID=your-openai-org-id

# Anthropic
ANTHROPIC_API_KEY=your-anthropic-api-key

# Google AI
GOOGLE_AI_API_KEY=your-google-ai-api-key

# Mixpanel Analytics
MIXPANEL_TOKEN=your-mixpanel-token
MIXPANEL_API_SECRET=your-mixpanel-api-secret

# LangSmith
LANGCHAIN_TRACING_V2=true
LANGCHAIN_ENDPOINT=https://api.smith.langchain.com
LANGCHAIN_API_KEY=your-langsmith-api-key
LANGCHAIN_PROJECT=cost-katana

# ===================================
# Rate Limiting
# ===================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ===================================
# Logging
# ===================================
LOG_LEVEL=info
LOG_FILE_PATH=./logs

# ===================================
# CORS Configuration
# ===================================
CORS_ORIGIN=*

# ===================================
# API Keys for Testing
# ===================================
TEST_API_KEY=test-api-key-for-development

# ===================================
# Feature Flags
# ===================================
ENABLE_CACHING=true
ENABLE_RATE_LIMITING=true
ENABLE_TELEMETRY=true
ENABLE_SECURITY_MONITORING=true

# ===================================
# Performance Tuning
# ===================================
MAX_POOL_SIZE=10
CONNECTION_TIMEOUT=60000
REQUEST_TIMEOUT=30000

# ===================================
# Monitoring Endpoints (Optional)
# ===================================
# For Mode C: Individual Docker containers
TEMPO_ENDPOINT=http://localhost:3200
PROMETHEUS_ENDPOINT=http://localhost:9090
GRAFANA_ENDPOINT=http://localhost:3000

# ===================================
# Database Backup Configuration
# ===================================
# Enable automatic database backups
ENABLE_DB_BACKUP=true

# Backup frequency in hours (default: 12)
BACKUP_INTERVAL_HOURS=12

# Local backup directory
BACKUP_LOCAL_PATH=./backups

# Backup retention days (local and S3)
BACKUP_RETENTION_DAYS=30

# S3 backup configuration
BACKUP_S3_BUCKET=cost-katana-backups
BACKUP_S3_REGION=us-east-1
BACKUP_S3_PREFIX=database-backups

# MongoDB dump options
MONGODB_DUMP_OPTIONS=--gzip --archive

# Backup compression (gzip, bzip2, or none)
BACKUP_COMPRESSION=gzip

# ===================================
# Development Settings
# ===================================
DEBUG=false
VERBOSE_LOGGING=false
